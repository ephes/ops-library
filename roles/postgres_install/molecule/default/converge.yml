---
- name: Converge
  hosts: all
  become: true

  pre_tasks:
    - name: Install python3-debian for deb822_repository module
      ansible.builtin.apt:
        name: python3-debian
        state: present
        update_cache: true

  vars:
    postgres_install_use_pgdg_repo: false
    postgres_install_version: "16"
    postgres_install_users:
      - name: molecule
        password: "molecule-pass"
        role_attr_flags: "LOGIN"
    postgres_install_databases:
      - name: molecule_db
        owner: molecule
        encoding: UTF8

  roles:
    - role: postgres_install
