# Paperless-ngx Environment Configuration
# Generated by Ansible - Do not edit manually

# Core settings
PAPERLESS_URL={{ paperless_url }}
PAPERLESS_SECRET_KEY={{ paperless_secret_key }}
PAPERLESS_ALLOWED_HOSTS={{ paperless_allowed_hosts }}
PAPERLESS_CORS_ALLOWED_HOSTS={{ paperless_cors_allowed_hosts }}
PAPERLESS_FORCE_SCRIPT_NAME={{ paperless_force_script_name }}
PAPERLESS_STATIC_URL={{ paperless_static_url }}
PAPERLESS_TIME_ZONE={{ paperless_time_zone }}
PAPERLESS_LANGUAGE={{ paperless_language }}

# Database configuration
PAPERLESS_DBENGINE=postgresql
PAPERLESS_DBHOST={{ paperless_postgres_host }}
PAPERLESS_DBPORT={{ paperless_postgres_port }}
PAPERLESS_DBNAME={{ paperless_postgres_database }}
PAPERLESS_DBUSER={{ paperless_postgres_user }}
PAPERLESS_DBPASS={{ paperless_postgres_password }}
PAPERLESS_DBSSLMODE={{ paperless_postgres_sslmode }}

# Redis configuration
{% if paperless_redis_password | length > 0 %}
{% set encoded_redis_password = paperless_redis_password | urlencode %}
PAPERLESS_REDIS=redis://:{{ encoded_redis_password | replace('/', '%2F') }}@{{ paperless_redis_host }}:{{ paperless_redis_port }}/{{ paperless_redis_database }}
{% else %}
PAPERLESS_REDIS=redis://{{ paperless_redis_host }}:{{ paperless_redis_port }}/{{ paperless_redis_database }}
{% endif %}

# Paths (using external storage)
PAPERLESS_MEDIA_ROOT={{ paperless_media_path }}
PAPERLESS_DATA_DIR={{ paperless_data_path }}
PAPERLESS_CONSUMPTION_DIR={{ paperless_consume_path }}
PAPERLESS_EXPORT_DIR={{ paperless_export_path }}
PAPERLESS_STATICDIR={{ paperless_site_root }}/staticfiles

# OCR settings
PAPERLESS_OCR_LANGUAGE={{ paperless_ocr_language }}
PAPERLESS_OCR_MODE={{ paperless_ocr_mode }}
PAPERLESS_OCR_THREADS={{ paperless_ocr_threads }}
PAPERLESS_OCR_PAGES=0
PAPERLESS_OCR_IMAGE_DPI=300
PAPERLESS_OCR_USER_ARGS='{}'

# Document processing
PAPERLESS_FILENAME_FORMAT="{{ paperless_filename_format }}"
PAPERLESS_FILENAME_DATE_ORDER={{ paperless_filename_date_order }}
PAPERLESS_CONSUMER_RECURSIVE={{ paperless_consumer_recursive }}
PAPERLESS_CONSUMER_SUBDIRS_AS_TAGS={{ paperless_consumer_subdirs_as_tags }}
PAPERLESS_CONSUMER_IGNORE_PATTERNS='[".DS_Store", "Thumbs.db", "desktop.ini"]'
PAPERLESS_CONSUMER_POLLING=60
PAPERLESS_CONSUMER_POLLING_DELAY=5
PAPERLESS_CONSUMER_POLLING_RETRY_COUNT=3

# Task processing
PAPERLESS_TASK_WORKERS={{ paperless_task_workers }}
PAPERLESS_THREADS_PER_WORKER={{ paperless_threads_per_worker }}

# Logging
PAPERLESS_LOGGING_DIR={{ paperless_site_root }}/logs
PAPERLESS_LOGROTATE_MAX_SIZE={{ paperless_logrotate_max_size }}
PAPERLESS_LOGROTATE_MAX_BACKUPS={{ paperless_logrotate_max_backups }}

# Security
PAPERLESS_ADMIN_USER={{ paperless_admin_user }}
PAPERLESS_ADMIN_PASSWORD={{ paperless_admin_password }}
PAPERLESS_ADMIN_MAIL={{ paperless_admin_email }}
PAPERLESS_ENABLE_HTTP_REMOTE_USER=false
PAPERLESS_AUTO_LOGIN_USERNAME=
PAPERLESS_COOKIE_PREFIX=paperless
PAPERLESS_CSRF_TRUSTED_ORIGINS={{ paperless_url }}
PAPERLESS_LOGOUT_REDIRECT_URL=/

# Features
PAPERLESS_ENABLE_UPDATE_CHECK=false
PAPERLESS_DATE_ORDER=DMY
PAPERLESS_CONVERT_MEMORY_LIMIT=256
PAPERLESS_CONVERT_TMPDIR={{ paperless_tmp_path }}

# Tika settings (disabled by default)
PAPERLESS_TIKA_ENABLED=false
PAPERLESS_TIKA_ENDPOINT=
PAPERLESS_TIKA_GOTENBERG_ENDPOINT=

# Other settings
PAPERLESS_IGNORE_DATES=

# Python settings
PYTHONUNBUFFERED=1
DJANGO_SETTINGS_MODULE=paperless.settings

# NLTK data path
NLTK_DATA={{ paperless_nltk_data_path }}
PAPERLESS_NLTK_DIR={{ paperless_nltk_data_path }}

# Temp directory for processing
PAPERLESS_SCRATCH_DIR={{ paperless_tmp_path }}
TMPDIR={{ paperless_tmp_path }}
MAGICK_TMPDIR={{ paperless_tmp_path }}
