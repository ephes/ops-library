---
- name: config | Ensure /etc/sanoid exists
  ansible.builtin.file:
    path: "{{ sanoid_config_path | dirname }}"
    state: directory
    owner: root
    group: root
    mode: "0755"

- name: config | Deploy sanoid.conf
  ansible.builtin.template:
    src: sanoid.conf.j2
    dest: "{{ sanoid_config_path }}"
    owner: "{{ sanoid_config_owner }}"
    group: "{{ sanoid_config_group }}"
    mode: "{{ sanoid_config_mode }}"
  notify: Restart sanoid timer
