---
# zfs_usb_replication - Default Variables

# Enable/disable role execution
zfs_usb_replication_enabled: true

# Packages needed for syncoid
zfs_usb_replication_packages:
  - sanoid

# Syncoid binary path
zfs_usb_replication_syncoid_path: "/usr/sbin/syncoid"

# Systemd units
zfs_usb_replication_service_name: "zfs-usb-replication"
zfs_usb_replication_timer_name: "zfs-usb-replication"

# Schedule
zfs_usb_replication_on_calendar: "Sun 04:00"
zfs_usb_replication_randomized_delay_sec: "30m"
zfs_usb_replication_timeout_sec: "8h"

# USB device and pool
zfs_usb_replication_device: ""
zfs_usb_replication_pool: ""

# Optional syncoid identifier to avoid snapshot name collisions
zfs_usb_replication_identifier: ""

# Pool export behavior (auto = only export when imported by the script)
zfs_usb_replication_force_export: false

# Runtime mount preparation
zfs_usb_replication_exportfs_lock_dir: "/etc/exports.d"

# Prevent read-only recursive parent datasets from blocking child mountpoint creation.
zfs_usb_replication_set_canmount_off_for_readonly_recursive_targets: true

# ZFS encryption key handling
zfs_usb_replication_key_manage: true
zfs_usb_replication_key_path: "/root/.zfs-key-vault"
# zfs_usb_replication_key: ""  # Set via SOPS

# Default syncoid args
zfs_usb_replication_default_args:
  - "--no-rollback"

# Replication jobs (REQUIRED)
# Each job supports:
# - source (string)
# - target (string)
# - recursive (bool)
# - readonly (bool)
# - extra_args (list)
zfs_usb_replication_jobs: []

# Alerting
zfs_usb_replication_alert_enabled: true
zfs_usb_replication_alert_email: "root"
zfs_usb_replication_alert_subject_prefix: "[zfs-usb]"
zfs_usb_replication_alert_script_path: "/usr/local/bin/zfs-usb-alert.sh"

# Spindown (optional)
zfs_usb_replication_spindown_enabled: false
zfs_usb_replication_spindown_devices: []
zfs_usb_replication_spindown_pool: ""
zfs_usb_replication_spindown_script_path: "/usr/local/bin/zfs-usb-spindown.sh"
