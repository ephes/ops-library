---
# Identity
openclaw_service_name: openclaw
openclaw_container_name: openclaw-gateway

# User (system user, auto UID — bind mounts chowned to container uid 1000)
openclaw_user: openclaw
openclaw_group: openclaw
openclaw_home: "/home/{{ openclaw_user }}"
openclaw_site_dir: "{{ openclaw_home }}/site"
openclaw_data_dir: "{{ openclaw_home }}/data"
openclaw_log_dir: "{{ openclaw_home }}/logs"
openclaw_build_dir: "{{ openclaw_home }}/build/openclaw"

# Source & build (no prebuilt image — clone repo and docker build on-host)
openclaw_repo_url: "https://github.com/openclaw/openclaw.git"
openclaw_version: ""  # REQUIRED — git tag, e.g. "v2026.2.21"
openclaw_image_name: "openclaw"
openclaw_image_tag: "{{ openclaw_version }}"
openclaw_force_rebuild: false

# Networking
openclaw_bind_host: "127.0.0.1"
openclaw_host_port: 18789
openclaw_container_port: 18789

# Gateway mode
openclaw_gateway_token: ""  # REQUIRED — gateway authentication token
openclaw_restart_policy: unless-stopped
openclaw_mem_limit: "2g"
openclaw_cpus: "1.0"
openclaw_pids_limit: 256
openclaw_node_max_old_space_size: 1536
openclaw_gateway_config_mode: "0600"

# Gateway hardening
openclaw_gateway_trusted_proxies:
  - "127.0.0.1"
  - "::1"
openclaw_gateway_allow_real_ip_fallback: false
openclaw_gateway_auth_rate_limit_enabled: true
openclaw_gateway_auth_rate_limit_max_attempts: 10
openclaw_gateway_auth_rate_limit_window_ms: 60000
openclaw_gateway_auth_rate_limit_lockout_ms: 300000
openclaw_gateway_auth_rate_limit_exempt_loopback: true

# AI provider credentials
openclaw_anthropic_api_key: ""  # REQUIRED — Anthropic API key
openclaw_openai_api_key: ""  # OPTIONAL — OpenAI API key (provider `openai`)
openclaw_openrouter_api_key: ""  # OPTIONAL — OpenRouter API key (provider `openrouter`)
openclaw_ollama_api_key: ""  # OPTIONAL — Ollama API key (provider `ollama`)
openclaw_ollama_base_url: ""  # OPTIONAL — Ollama base URL (e.g. http://127.0.0.1:11434)

# Agent model policy (optional; when primary is set, role patches agents.defaults.model)
openclaw_agent_model_primary: ""
openclaw_agent_model_fallbacks: []

# Telegram channel
openclaw_telegram_enabled: false
openclaw_telegram_bot_token: ""
openclaw_telegram_dm_policy: allowlist  # allowlist | open
openclaw_telegram_allow_from: []  # numeric Telegram user IDs

# System prompt for AI replies
openclaw_reply_system_prompt: "You are a concise assistant."

# Full config override (rendered as openclaw.json).
# When set, this dict is rendered directly — individual openclaw_telegram_*
# variables are ignored.
openclaw_gateway_config: {}

# Config behavior: only seed openclaw.json if absent. Set true to overwrite.
openclaw_force_config: false

# Extra env for overrides
openclaw_extra_env: {}

# Traefik reverse proxy
openclaw_traefik_enabled: false
openclaw_traefik_config_path: "/etc/traefik/dynamic/openclaw.yml"
openclaw_traefik_host: ""  # REQUIRED when traefik enabled
openclaw_traefik_entrypoints:
  - web-secure
openclaw_traefik_cert_resolver: ""
openclaw_traefik_ip_allowlist: []  # e.g. ["100.64.0.0/10", "fd7a:115c:a1e0::/48"] for Tailscale-only

# Feature flags
openclaw_install_docker: true
openclaw_manage_user: true
openclaw_healthcheck_enabled: true

# Health check
openclaw_healthcheck_retries: 6
openclaw_healthcheck_delay: 5

# Log rotation
openclaw_logrotate_days: 7

# Nyxmon/OpenClaw metrics endpoint (json-metrics compatible)
openclaw_metrics_endpoint_enabled: false
openclaw_metrics_endpoint_user: metrics
openclaw_metrics_endpoint_group: "{{ openclaw_metrics_endpoint_user }}"
openclaw_metrics_endpoint_service_name: openclaw-metrics-endpoint
openclaw_metrics_endpoint_timer_name: openclaw-metrics-collector
openclaw_metrics_endpoint_bind: "127.0.0.1"
openclaw_metrics_endpoint_port: 9104
openclaw_metrics_endpoint_path: "/.well-known/openclaw-health"
openclaw_metrics_endpoint_auth_user: "CHANGEME"
openclaw_metrics_endpoint_auth_password: "CHANGEME"
openclaw_metrics_endpoint_packages:
  - python3
  - apache2-utils
openclaw_metrics_endpoint_data_dir: "/var/lib/openclaw-metrics"
openclaw_metrics_endpoint_json_path: "{{ openclaw_metrics_endpoint_data_dir }}/openclaw-health.json"
openclaw_metrics_endpoint_server_path: "/usr/local/bin/openclaw_metrics_httpd.py"
openclaw_metrics_endpoint_collector_path: "/usr/local/bin/openclaw_metrics_collector.py"
openclaw_metrics_endpoint_htpasswd_dir: "/etc/openclaw-metrics-endpoint"
openclaw_metrics_endpoint_htpasswd_path: "{{ openclaw_metrics_endpoint_htpasswd_dir }}/htpasswd"
openclaw_metrics_endpoint_container_name: "{{ openclaw_container_name }}"
openclaw_metrics_endpoint_command_timeout: 20
openclaw_metrics_endpoint_timer_interval: 120
openclaw_metrics_endpoint_timer_on_boot_sec: 30
openclaw_metrics_endpoint_timer_accuracy_sec: 10
openclaw_metrics_endpoint_timer_randomized_delay_sec: 15
openclaw_metrics_endpoint_remove_data_on_disable: false
openclaw_metrics_endpoint_synthetic_canary_enabled: false
openclaw_metrics_endpoint_synthetic_canary_agent: "main"
openclaw_metrics_endpoint_synthetic_canary_message: "Reply exactly: OPENCLAW_CANARY_OK"
openclaw_metrics_endpoint_synthetic_canary_expected_text: "OPENCLAW_CANARY_OK"
openclaw_metrics_endpoint_synthetic_canary_interval: 1800
openclaw_metrics_endpoint_synthetic_canary_timeout: 45
openclaw_metrics_endpoint_synthetic_canary_max_attempts: 2
openclaw_metrics_endpoint_synthetic_canary_retry_delay_seconds: 5
openclaw_metrics_endpoint_synthetic_canary_state_path: "{{ openclaw_metrics_endpoint_data_dir }}/openclaw-canary-state.json"
openclaw_metrics_endpoint_synthetic_canary_output_max_chars: 256

# IMAP read-only mail skill
openclaw_imap_enabled: false
openclaw_imap_host: ""
openclaw_imap_port: 993
openclaw_imap_tls_mode: "imaps"  # imaps | starttls
openclaw_imap_default_mailbox: "INBOX"
openclaw_imap_account_map: {}
openclaw_imap_secret_source: {}
openclaw_imap_default_account: ""
openclaw_imap_skill_name: "mail-imap"
openclaw_imap_command_skill_name: "mail"
openclaw_imap_skills_dir: "{{ openclaw_data_dir }}/skills"
openclaw_imap_container_skills_dir: "/home/node/.openclaw/skills"
openclaw_imap_credentials_path: "{{ openclaw_data_dir }}/credentials/imap_accounts.json"
openclaw_imap_container_credentials_path: "/home/node/.openclaw/credentials/imap_accounts.json"
openclaw_imap_connect_timeout_seconds: 10
openclaw_imap_command_timeout_seconds: 15
openclaw_imap_default_limit: 10
openclaw_imap_max_limit: 25
openclaw_imap_header_max_chars: 240
openclaw_imap_subject_max_chars: 240
openclaw_imap_read_fetch_bytes: 4096
openclaw_imap_read_snippet_chars: 800
openclaw_imap_search_query_max_chars: 200

# Weeknotes/todo automation
openclaw_weeknotes_enabled: false
openclaw_weeknotes_tz: "Europe/Berlin"
openclaw_weeknotes_skill_name: weeknotes-md
openclaw_weeknotes_skills_dir: "{{ openclaw_data_dir }}/skills"
openclaw_weeknotes_dir: "{{ openclaw_data_dir }}/weeknotes"
openclaw_weeknotes_container_dir: "/home/node/.openclaw/weeknotes"
openclaw_weeknotes_container_skills_dir: "/home/node/.openclaw/skills"
openclaw_weeknotes_backend: "local"  # local | s3
openclaw_weeknotes_command_skill_names:
  - todo
  - note
  - snooze
openclaw_weeknotes_snapshot_max_count: 200
openclaw_weeknotes_snapshot_max_days: 14
openclaw_weeknotes_lock_timeout: 5
openclaw_weeknotes_max_payload_length: 500
openclaw_weeknotes_rate_limit_writes: 10
openclaw_weeknotes_rate_limit_window_secs: 600
openclaw_weeknotes_reminder_cron: "0 9 * * 1-5"
openclaw_weeknotes_reminder_command: "/todo reminder"

# Weeknotes S3 backend settings (used when openclaw_weeknotes_backend=s3)
openclaw_weeknotes_s3_endpoint: ""
openclaw_weeknotes_s3_region: "us-east-1"
openclaw_weeknotes_s3_bucket: ""
openclaw_weeknotes_s3_prefix: ""
openclaw_weeknotes_s3_access_key: ""
openclaw_weeknotes_s3_secret_key: ""
openclaw_weeknotes_s3_note_key_format: "%Y-%m-%d.md"
openclaw_weeknotes_s3_todo_list_mode: "current_note"  # current_note | daily_notes
openclaw_weeknotes_s3_todo_list_key_regex: "^[0-9]{4}-[0-9]{2}-[0-9]{2}\\.md$"
openclaw_weeknotes_s3_todo_cache_refresh_secs: 120
openclaw_weeknotes_s3_mc_alias: "weeknotes"
openclaw_weeknotes_s3_mc_host_path: "/usr/local/bin/mc"
openclaw_weeknotes_s3_mc_container_path: "/usr/local/bin/mc"
