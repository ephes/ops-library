---
- name: Reload systemd for openclaw
  listen: reload systemd
  ansible.builtin.systemd:
    daemon_reload: true

- name: Restart openclaw
  listen: restart openclaw
  ansible.builtin.systemd:
    name: "{{ openclaw_service_name }}"
    state: restarted
    enabled: true
    daemon_reload: true

- name: Reload traefik for openclaw
  listen: reload traefik
  ansible.builtin.systemd:
    name: traefik
    state: restarted

- name: Restart openclaw metrics endpoint
  listen: restart openclaw-metrics-endpoint
  ansible.builtin.systemd:
    name: "{{ openclaw_metrics_endpoint_service_name }}"
    state: restarted
    daemon_reload: true

- name: Restart openclaw metrics collector timer
  listen: restart openclaw-metrics-collector-timer
  ansible.builtin.systemd:
    name: "{{ openclaw_metrics_endpoint_timer_name }}.timer"
    state: restarted
    daemon_reload: true
