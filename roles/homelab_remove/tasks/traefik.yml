---
# Remove Traefik configuration

- name: Remove Traefik dynamic configuration
  ansible.builtin.file:
    path: "{{ homelab_traefik_config_path }}"
    state: absent
  when: homelab_remove_traefik_config

- name: Verify Traefik config removal
  ansible.builtin.stat:
    path: "{{ homelab_traefik_config_path }}"
  register: homelab_traefik_check
  when: homelab_remove_traefik_config

- name: Confirm Traefik config removed
  ansible.builtin.debug:
    msg: "âœ“ Traefik configuration removed (auto-reload will pick up changes)"
  when:
    - homelab_remove_traefik_config
    - not homelab_traefik_check.stat.exists
