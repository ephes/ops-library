---
# General settings
homeassistant_user: homeassistant
homeassistant_group: "{{ homeassistant_user }}"
homeassistant_shell: /bin/bash
homeassistant_home: "/home/{{ homeassistant_user }}"
homeassistant_site_path: "{{ homeassistant_home }}/site"
homeassistant_config_path: "{{ homeassistant_site_path }}/config"
homeassistant_data_path: "{{ homeassistant_site_path }}/data"
homeassistant_logs_path: "{{ homeassistant_site_path }}/logs"
homeassistant_bin_path: "{{ homeassistant_site_path }}/bin"

# Python / uv
homeassistant_manage_uv: true
homeassistant_uv_install_dir: /usr/local/bin
homeassistant_uv_install_user: root
homeassistant_uv_version: latest
homeassistant_uv_update_existing: true
homeassistant_uv_force_reinstall: false
homeassistant_uv_path: "{{ homeassistant_uv_install_dir }}/uv"
homeassistant_python_version: "3.13.7"
homeassistant_virtualenv_path: "{{ homeassistant_site_path }}/.venv"
homeassistant_virtualenv_link: "{{ homeassistant_site_path }}/venv"
homeassistant_package_spec: "homeassistant"
homeassistant_force_reinstall: false
homeassistant_virtualenv_version_file: "{{ homeassistant_virtualenv_path }}/.ansible-python-version"

# Service
homeassistant_service_name: homeassistant
homeassistant_service_enabled: true
homeassistant_service_state: started
homeassistant_systemd_unit_path: "/etc/systemd/system/{{ homeassistant_service_name }}.service"
homeassistant_app_port: 10020
homeassistant_host: "0.0.0.0"

# Configuration management toggles
homeassistant_manage_configuration: false
homeassistant_manage_secrets: false
homeassistant_manage_includes: false
homeassistant_overwrite_config: false
homeassistant_manage_unifi_password: true

# Location / recorder defaults (safe placeholders â€“ override per environment)
homeassistant_name: "Home Assistant"
homeassistant_latitude: 0.0
homeassistant_longitude: 0.0
homeassistant_elevation: 0
homeassistant_unit_system: metric
homeassistant_time_zone: UTC
homeassistant_country: "DE"
homeassistant_currency: "EUR"

homeassistant_recorder_keep_days: 10
homeassistant_recorder_commit_interval: 5

# Database / recorder backend
homeassistant_db_url: "sqlite:///{{ homeassistant_config_path }}/home-assistant_v2.db"

# HTTP / networking
homeassistant_external_url: ""
homeassistant_internal_url: ""
homeassistant_trusted_proxies:
  - "127.0.0.1"
  - "::1"
homeassistant_additional_packages:
  - build-essential
  - python3-dev
  - libffi-dev
  - libssl-dev
  - libjpeg-dev
  - zlib1g-dev
  - autoconf
  - libopenjp2-7
  - libtiff-dev
  - libtiff6
  - libfreetype6-dev
  - libwebp-dev
  - tzdata
  - ffmpeg

# Udev rule management
homeassistant_enable_udev_rule: true
homeassistant_udev_rule_path: /etc/udev/rules.d/99-homeassistant-zbt1.rules

# UniFi password discovery
homeassistant_unifi_password_source: "file"  # file|generate|variable
homeassistant_unifi_password_file: /home/unifi/.homeassistant_unifi_password
homeassistant_unifi_password_length: 24
homeassistant_unifi_password_charset: "ascii_letters,digits"
homeassistant_unifi_password_variable: ""

# Traefik integration
homeassistant_traefik_enabled: true
homeassistant_traefik_domain: ""  # REQUIRED - your Traefik domain (e.g., home.example.com)
homeassistant_traefik_entrypoints:
  - web-secure
homeassistant_traefik_middlewares:
  - homeassistant-headers
homeassistant_traefik_local_middlewares:
  - homeassistant-headers
  - homeassistant-websocket
homeassistant_traefik_local_hostname: "homeassistant.local"
homeassistant_traefik_mode: single  # single|dual (future)
homeassistant_traefik_dynamic_dir: /etc/traefik/dynamic
homeassistant_traefik_certresolver: letsencrypt
homeassistant_traefik_template: homeassistant.traefik.yml.j2
homeassistant_traefik_reload_handler: reload traefik config

# Include file management (applied when homeassistant_manage_includes true)
homeassistant_include_files:
  - automations.yaml
  - scripts.yaml
  - scenes.yaml
  - groups.yaml
  - persons.yaml
  - presence_automations.yaml

# Template source options
homeassistant_templates_base: "{{ role_path }}/templates"

# Service URLs used inside templates
homeassistant_unifi_username: homeassistant
homeassistant_unifi_host: "192.168.178.94"
homeassistant_unifi_port: 8443
homeassistant_unifi_site: default
homeassistant_unifi_verify_ssl: false
homeassistant_unifi_track_new_devices: false
homeassistant_unifi_detection_time: 180
homeassistant_unifi_consider_home: 180
homeassistant_unifi_password: ""

# Logging defaults
homeassistant_logger_default: warning
homeassistant_logger_logs:
  homeassistant.core: info
  homeassistant.components.http: info

# Idempotency guard
homeassistant_initial_deploy: false

# Handler control
homeassistant_restart_on_change: true
