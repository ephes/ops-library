---
- name: Initialise paperless restore context
  ansible.builtin.set_fact:
    paperless_restore_timestamp: "{{ ansible_date_time.iso8601_basic_short }}"
    paperless_restore_operation_successful: false
    paperless_restore_rollback_executed: false

- block:
    - ansible.builtin.include_tasks: validate.yml
    - ansible.builtin.include_tasks: prepare.yml
    - ansible.builtin.include_tasks: restore.yml
    - ansible.builtin.include_tasks: verify.yml
  always:
    - ansible.builtin.include_tasks: cleanup.yml
