---
- name: "Create MeTube directories"
  ansible.builtin.file:
    path: "{{ item.path }}"
    state: directory
    owner: "{{ item.owner | default(metube_user) }}"
    group: "{{ item.group | default(metube_group) }}"
    mode: "{{ item.mode | default('0755') }}"
  loop:
    - { path: "{{ metube_install_dir }}", mode: "0755" }
    - { path: "{{ metube_env_dir }}", owner: "root", group: "root", mode: "0755" }
    - { path: "{{ metube_state_dir }}", mode: "0755" }
    - { path: "{{ metube_temp_dir }}", mode: "0775" }
    - { path: "{{ metube_download_dir }}", mode: "0775" }
  notify: restart metube
