---
# DNS Deploy Role - Default Variables
# Unbound-only DNS with split-horizon views and ad blocking

# Clean install options
dns_clean_install: false  # Set to true to remove existing DNS configs
dns_backup_existing: true  # Set to false to skip backing up existing configs

# DNS Configuration
dns_local_domain: "home.example.com"
dns_local_domain_punycode: "home.example.com"  # Same if no special chars
dns_local_ip: "{{ ansible_default_ipv4.address }}"

# Unbound configuration
dns_unbound_config_dir: /etc/unbound/unbound.conf.d
dns_unbound_blocklist_dir: /var/lib/unbound

# Split-DNS Configuration
dns_split_lan_network: "192.168.0.0/16"        # Default LAN network range
dns_split_tailscale_network: "100.64.0.0/10"   # Default Tailscale network range
dns_split_lan_ip: "{{ ansible_default_ipv4.address }}"
dns_split_tailscale_ip: ""  # MUST be set if using split-DNS
dns_split_tailscale_ipv6: ""  # Optional IPv6 address

# Service overrides for split-DNS
# Each service can have different IPs for LAN vs Tailscale clients
dns_split_services: []
#  - name: "router"
#    lan_ip: "192.168.1.1"
#    tailscale_ip: "192.168.1.1"
#  - name: "nas"
#    lan_ip: "192.168.1.10"
#    tailscale_ip: "192.168.1.10"

# Blocklist Configuration
dns_blocklists_enabled: true
dns_blocklists:
  - "https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts"
  - "https://someonewhocares.org/hosts/zero/hosts"
  - "https://raw.githubusercontent.com/AdguardTeam/AdguardSDNSFilter/master/Filters/filter.txt"

# Allowlist - domains that should never be blocked
dns_allowlist:
  - "github.com"
  - "githubusercontent.com"
  - "*.github.io"

# Firewall configuration (optional)
dns_firewall_enable: false  # Set to true to configure UFW rules

# Local resolver configuration
dns_update_resolv_conf: true  # Update /etc/resolv.conf to use local DNS