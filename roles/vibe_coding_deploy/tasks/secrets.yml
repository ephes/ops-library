---
- name: secrets | Ensure fish conf.d directory exists
  ansible.builtin.file:
    path: "{{ vibe_coding_user_home }}/.config/fish/conf.d"
    state: directory
    owner: "{{ vibe_coding_user }}"
    group: "{{ vibe_coding_group }}"
    mode: "0755"

- name: secrets | Deploy secrets.fish with environment variables
  ansible.builtin.template:
    src: secrets.fish.j2
    dest: "{{ vibe_coding_user_home }}/.config/fish/conf.d/secrets.fish"
    owner: "{{ vibe_coding_user }}"
    group: "{{ vibe_coding_group }}"
    mode: "0600"
