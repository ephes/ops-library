# Environment variables for {{ service.name }}
# Generated by Ansible - do not edit directly

# Regular environment variables
{% for key, value in (service.env | default({})).items() %}
{{ key }}={{ value }}
{% endfor %}

# Secrets from SOPS (if configured)
{% if service.secrets_file is defined and service.secrets is defined %}
{% set secrets_data = lookup('community.sops.sops', playbook_dir + '/../' + service.secrets_file) | from_yaml %}
{% for secret_mapping in service.secrets %}
{% for env_name, secret_key in secret_mapping.items() %}
{{ env_name }}={{ secrets_data[secret_key] }}
{% endfor %}
{% endfor %}
{% endif %}