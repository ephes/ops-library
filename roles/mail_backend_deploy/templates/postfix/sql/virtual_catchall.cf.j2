# Postfix PostgreSQL lookup - Catch-all aliases
# Generated by Ansible - do not edit manually
# Schema mode: {{ mail_backend_schema_mode }}

user = {{ mail_backend_postgres_user }}
password = {{ mail_backend_postgres_password }}
hosts = {{ mail_backend_postgres_host }}
dbname = {{ mail_backend_postgres_database }}

# Query uses domain part only (Postfix queries @domain for catch-all)
{% if mail_backend_schema_mode == 'postfixadmin' %}
# PostfixAdmin uses @domain format for catch-all in alias table
query = SELECT goto FROM alias WHERE LOWER(address) = LOWER('@%d') AND active = '1'
{% else %}
query = SELECT destination FROM mail_catchall_view WHERE LOWER(domain) = LOWER('%d')
{% endif %}
