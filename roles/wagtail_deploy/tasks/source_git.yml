---
# Deploy Wagtail source code using git

- name: Install git
  ansible.builtin.package:
    name: git
    state: present

- name: Clone or update repository
  ansible.builtin.git:
    repo: "{{ wagtail_git_repo }}"
    dest: "{{ wagtail_site_path }}"
    version: "{{ wagtail_git_version }}"
    force: true
  become: true
  become_user: "{{ wagtail_user }}"
  register: wagtail_git_result

- name: Report git update status
  ansible.builtin.debug:
    msg: "Repository updated: {{ wagtail_git_result.changed }}"
