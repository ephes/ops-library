---
- name: packages | Preseed postfix debconf (non-interactive install)
  ansible.builtin.debconf:
    name: postfix
    question: "{{ item.question }}"
    value: "{{ item.value }}"
    vtype: "{{ item.vtype }}"
  loop:
    - question: postfix/main_mailer_type
      value: "No configuration"
      vtype: select
    - question: postfix/mailname
      value: "{{ mail_relay_client_myhostname }}"
      vtype: string
  loop_control:
    label: "{{ item.question }}"

- name: packages | Install postfix + mailx
  ansible.builtin.apt:
    name: "{{ mail_relay_client_packages }}"
    state: present
    update_cache: true
    cache_valid_time: 3600
